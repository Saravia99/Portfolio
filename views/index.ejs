<%- include('partials/header.ejs') %>

        <!-- THUMBNAILS - IMG / VID GALLERY-->
        <main>
        
        <!-- LOADER -->
        <div id="loader" class="center"></div>
        <script>

            function blue() {
                const currentPage = window.location.href;
                const links = document.getElementsByTagName('a');
                for (let link of links) {
                    if (link.href == currentPage) {
                        //console.log(currentPage);
                        link.classList.add("current");
                    }
                }
            }

            let titles = document.querySelectorAll('h3.thumbnail_title'); 

            document.onreadystatechange = () => {
                if (document.readyState !="complete") {
                    document.querySelector("main").style.visibility = "hidden";
                    document.querySelector("#loader").style.visibility = "visible";

                    titles.forEach(function(title){
                        title.style.position = "fixed";
                    })
                    
                } else {
                    document.querySelector("#loader").style.display = "none";
                    document.querySelector("main").style.visibility = "visible";

                    titles.forEach(function(title){
                        title.style.position = "absolute";
                    })

                    blue();
                }
            };
        </script>

            <div class="container-fluid d-flex g-0">

                <div class="row gx-0 thumb_box">
        
                    <% thumbnailsList.forEach(thumbnail => {%>
                        
                        <div class="col-md-6 col-lg-4 d-flex title"> 
    
                            <a class="d-flex" href="/<%= thumbnail._id %>">
                                <h3 class="text-center thumbnail_title"><%= thumbnail.title %></h3>
                                <div id="source1">
                                    <img class="img-fluid thumbnail_img" width="1200" height="496" src="<%= thumbnail.imgSrc %>" 
                                    alt="visual for <%= thumbnail.title %> by regis raffin">
                                </div>
                                <div id="source2">
                                    <video id="no-load-mobile" class="thumbnail_vid hidden w-100 h-100" autoplay playsinline muted loop src="<%= thumbnail.videoSrc %>" type="video/mp4"></video>
                                </div>
                            </a>
                        </div>
        
                    <%})%>
                
                </div>

            </div>

        </main>
        <%- include('partials/footer.ejs') %>
    </body>
